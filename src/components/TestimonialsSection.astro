---
const { testimonials } = Astro.props;

// Split testimonials into two rows
const firstRow = testimonials.slice(0, Math.ceil(testimonials.length / 2));
const secondRow = testimonials.slice(Math.ceil(testimonials.length / 2));
---

<section
  id="testimonios"
  class="scroll-mt-[100px] min-h-[80vh] bg-slate-300 to-blue-50 py-10 px-4 sm:px-8 md:px-16 lg:px-20 space-y-10 overflow-hidden pt-[120px]"
>
  <div class="flex flex-col lg:flex-row lg:justify-between gap-4">
    <h2
      class="text-3xl sm:text-4xl font-bold text-slate-900 mb-2 lg:mb-4 lg:mr-10"
    >
      Lo que nuestros <br /> clientes dicen
    </h2>
    <p
      class="text-base sm:text-lg text-slate-600 mb-4 text-justify w-full lg:w-2/3"
    >
      Nos llena de satisfacción saber que quienes han confiado en nosotros
      desean compartir sus experiencias y opiniones sobre la atención recibida.
      Sus palabras nos motivan a seguir mejorando cada día y a brindar un
      servicio de calidad, enfocado en el bienestar y la satisfacción de cada
      persona que atendemos.
    </p>
  </div>

  <!-- Carousel Container -->
  <div class="relative w-full space-y-6">
    <!-- Fade overlays -->
    <div
      class="pointer-events-none absolute top-0 left-0 h-full w-12 bg-gradient-to-r from-slate-300 via-slate-300/70 to-transparent z-10"
    >
    </div>
    <div
      class="pointer-events-none absolute top-0 right-0 h-full w-12 bg-gradient-to-l from-slate-300 via-slate-300/70 to-transparent z-10"
    >
    </div>

    <!-- First Row - Moving Right -->
    <div class="relative w-full overflow-hidden" data-direction="right">
      <div class="flex gap-6 w-max" id="track-1">
        {
          [...firstRow, ...firstRow].map((testimonial, index) => (
            <div class="min-w-[100px] max-w-[350px] h-40 sm:h-64 p-4 sm:p-6 flex flex-col justify-center gap-3 rounded-xl border border-sky-700 bg-white/70 shadow-md">
              <img
                src="/quotes.svg"
                alt="quotes"
                class="w-7 h-7 sm:w-10 sm:h-10 rounded-full p-1"
                loading="lazy"
              />
              <p class="text-slate-600 text-xs sm:text-base">
                {testimonial.feedback}
              </p>
              <div class="flex items-center space-x-3 sm:space-x-4 border-t border-slate-400 pt-3 sm:pt-4">
                <img
                  src="/user.svg"
                  alt="user"
                  class="w-7 h-7 sm:w-10 sm:h-10 rounded-full border border-slate-400 p-1"
                  loading="lazy"
                />
                <h2 class="text-sm sm:text-xl font-semibold mb-0">
                  {testimonial.name}
                </h2>
              </div>
            </div>
          ))
        }
      </div>
    </div>

    <!-- Second Row - Moving Left -->
    <div class="relative w-full overflow-hidden" data-direction="left">
      <div class="flex gap-6 w-max" id="track-2">
        {
          [...secondRow, ...secondRow].map((testimonial, index) => (
            <div class="min-w-[300px] max-w-[350px] h-40 sm:h-64 p-4 sm:p-6 flex flex-col justify-center gap-3 rounded-xl border border-sky-700 bg-white/70 shadow-md">
              <img
                src="/quotes.svg"
                alt="quotes"
                class="w-7 h-7 sm:w-10 sm:h-10 rounded-full p-1"
                loading="lazy"
              />
              <p class="text-slate-600 text-xs sm:text-base">
                {testimonial.feedback}
              </p>
              <div class="flex items-center space-x-3 sm:space-x-4 border-t border-slate-400 pt-3 sm:pt-4">
                <img
                  src="/user.svg"
                  alt="user"
                  class="w-7 h-7 sm:w-10 sm:h-10 rounded-full border border-slate-400 p-1"
                  loading="lazy"
                />
                <h2 class="text-sm sm:text-xl font-semibold mb-0">
                  {testimonial.name}
                </h2>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>

<style>
  @media (min-width: 640px) {
    .testimonial-card {
      padding: 1.5rem 1.5rem;
      gap: 1rem;
    }
  }
</style>
